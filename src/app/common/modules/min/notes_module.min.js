angular.module("NoteWrangler.models.notes",[]).service("NotesModel",function(t,e){function n(t){return t.data}function r(t){return u=n(t)}function o(t){return a=n(t)}var u,i,a,f,c=this,g={FETCH:"app/data/notes.json"},s={FETCH:"app/data/categories.json"};c.getNotes=function(){return u?e.when(u):t.get(g.FETCH).then(r)},c.getCategories=function(){return a?e.when(a):t.get(s.FETCH).then(o)},c.setCurrentNote=function(t){return c.getNoteById(t).then(function(t){i=t})},c.setCurrentCategory=function(t){return c.getCatByNoteCategoryId(t).then(function(t){f=t})},c.getCurrentNoteTitle=function(){return i?i.title:""},c.getCategory=function(){return f?f.name:""},c.getCatByNoteCategoryId=function(t){function n(){return _.find(a,function(e){return e.id==t})}var r=e.defer();return a?r.resolve(n()):c.getCategories().then(function(){r.resolve(n())}),r.promise},c.getNoteById=function(t){function n(){return _.find(u,function(e){return e.id==t})}var r=e.defer();return u?r.resolve(n()):c.getNotes().then(function(){r.resolve(n())}),r.promise}});